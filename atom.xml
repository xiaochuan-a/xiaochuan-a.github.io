<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¾ˆé—æ†¾å¯¹å§</title>
  
  <subtitle>é»‘æš—æ•£å°½ï¼Œæœˆåæ»¡å¤©</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2024-10-25T09:07:52.112Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>çš“æ›¦ä¹‹æœˆ</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åŠ¨æ¼«å¤´åƒ</title>
    <link href="http://example.com/posts/photo1.html"/>
    <id>http://example.com/posts/photo1.html</id>
    <published>2024-10-25T07:25:14.000Z</published>
    <updated>2024-10-25T09:07:52.112Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note info"><p>ä¸å®šæœŸæ›´æ–°åŠ¨æ¼«å¤´åƒï½</p></div><p><img data-src="https://hexo-sakura.oss-cn-beijing.aliyuncs.com/202410251534400.png" alt : style="width: 30%; display: inline-block;"><br><img data-src="https://hexo-sakura.oss-cn-beijing.aliyuncs.com/202410251534892.png" alt : style="width: 30%; display: inline-block;"><br><img data-src="https://hexo-sakura.oss-cn-beijing.aliyuncs.com/202410251534383.png" alt : style="width: 30%; display: inline-block;"><br><img data-src="https://hexo-sakura.oss-cn-beijing.aliyuncs.com/202410251534533.png" alt : style="width: 30%; display: inline-block;"><br><img data-src="https://hexo-sakura.oss-cn-beijing.aliyuncs.com/202410251536836.jpg" alt : style="width: 30%; display: inline-block;"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="æ— " scheme="http://example.com/tags/%E6%97%A0/"/>
    
  </entry>
  
  <entry>
    <title>ä¸è¦åœä¸‹å‰è¿›çš„è„šæ­¥</title>
    <link href="http://example.com/posts/asd2.html"/>
    <id>http://example.com/posts/asd2.html</id>
    <published>2023-07-21T03:25:14.000Z</published>
    <updated>2024-09-27T07:52:24.100Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note primary"><p>2024/03/19 11ï¼š11<br> æ˜¨å¤©ä¼˜åŒ–äº†ä¸€æ®µçš„è‡ªå·±çš„ä»£ç ï¼Œæ„Ÿè§‰æ¶‰åŠæŠ€æœ¯ç‚¹è¿˜æ˜¯æŒºå¤šçš„ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹</p></div><p>æœ€è¿‘å®£è´¯çš„ä¸€ä¸ªéœ€æ±‚æ˜¯ï¼šå¦‚æœå®¢æˆ·æäº†ä¸€ä¸ªè®¢å•ï¼Œéœ€è¦å®¡æ‰¹äººè¿›è¡Œä¸€ä¸ªå®¡æ‰¹ï¼Œä½†æ˜¯è¿™ä¸ªå®¡æ‰¹äººåœ¨ä¸€å¤©å†…ï¼ˆ24 å°æ—¶ï¼‰æ²¡æœ‰å®¡æ‰¹ï¼Œæˆ‘ä»¬å°±éœ€è¦ç»™å®¡æ‰¹äººå‘é€çŸ­ä¿¡æé†’ä¸€ä¸‹ï¼Œè¿™ä¸ªéœ€æ±‚æ”¹é€ æ€»ä½“æ¶‰åŠä¸‰ä¸ªåŠŸèƒ½ç‚¹ï¼š<br><span class="kbd red">1ï¼šåˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©çš„æ—©ä¸Šä¹ç‚¹æ‰§è¡Œï¼Œæ£€æŸ¥å®¡æ‰¹å•æ˜¯å¦å·²ç»è¶…è¿‡ä¸€å¤©æœªå¤„ç†ï¼Œå¦‚æœæ˜¯ï¼Œè®°å½•è¯¥å®¡æ‰¹äººéœ€è¦å‘é€çŸ­ä¿¡æé†’</span><br><span class="kbd red"> 2ï¼šæ£€æŸ¥å½“å‰æ—¶é—´æ˜¯å¦ä¸ºå·¥ä½œæ—¥ï¼Œéœ€è¦å°†å½“å‰å®¡æ‰¹äººçš„ä¿¡æ¯æˆ–è€…å•å·è®°å½•ä¸‹æ¥ï¼Œå¦‚æœä¸æ˜¯å·¥ä½œæ—¥å°±ä¸æé†’ï¼Œç›´æ¥ return</span><br><span class="kbd red">3ï¼šå½“å‰å®¡æ‰¹äººä¸‹çš„æœ‰å¤šä¸ªè®¢å•æœªå®¡æ‰¹ï¼Œåªéœ€è¦å‘é€ä¸€æ¡çŸ­ä¿¡å°±è¡Œ</span><br>é¦–å…ˆæ˜¯æˆ‘çš„ç¬¬ä¸€ç‰ˆä»£ç ç¼–å†™æ€è·¯ï¼š<br>ï¼ˆ1ï¼‰ï¼šè¿™é‡Œé¦–è¦çš„åˆ¤æ–­æ¡ä»¶æ˜¯è¦å…ˆå¯¹å·¥ä½œæ—¥å’Œéå·¥ä½œæ—¥åšå‡ºä¸€ä¸ªåˆ¤æ–­ï¼Œå› ä¸ºå¦‚æœä¸æ˜¯å·¥ä½œæ—¥å‰©ä¸‹çš„ä»£ç å°±ä¸ç”¨ç»§ç»­æ‰§è¡Œäº†ï¼ˆè¿™é‡Œçš„åˆ¤æ–­æ˜¯è°ƒç”¨çš„ç¬¬ä¸‰æ–¹ APIï¼Œå› ä¸ºå’±ä»¬å›½å®¶çš„æ”¾å‡å¤ªæŠ½è±¡.. è¿˜æœ‰è°ƒä¼‘åœ¨é‡Œé¢ï¼‰<br>ï¼ˆ2ï¼‰ï¼šç„¶åè¦è·å–åˆ°æ‰€æœ‰çš„è®¢å•ï¼Œåœ¨è·å–åˆ°åˆ›å»ºè®¢å•çš„æ—¶é—´ï¼Œè®¢å•å®¡æ‰¹çŠ¶æ€ï¼ˆæœªå®¡æ‰¹æ˜¯ N å®¡æ‰¹æ˜¯ Yï¼‰åŠæ¯ä¸ªè®¢å•ä¸‹çš„å®¡æ‰¹äººä¿¡æ¯<br>ï¼ˆ3ï¼‰ï¼šè½¬æ¢åˆ›å»ºæ—¶é—´çš„æ—¶é—´æ ¼å¼ï¼Œè·å–å½“å‰æ—¶é—´ï¼Œè¿›è¡Œå¯¹æ¯”ï¼Œè¶…è¿‡ 24 å°æ—¶æ‰§è¡Œå‘é€çŸ­ä¿¡é€»è¾‘</p><p><figure class="highlight java"><figcaption><span>ç¬¬ä¸€ç‰ˆä»£ç </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isWorkDayOrNot(<span class="keyword">new</span> <span class="title class_">Date</span>())) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;å½“å‰æ—¶é—´ä¸ºå·¥ä½œæ—¥ï¼Œå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">BUSINESS_SERVICE_NAME</span> <span class="operator">=</span> <span class="string">&quot;ABS-BUSINESS-ECLOUD&quot;</span>;</span><br><span class="line">                List&lt;String&gt; phoneList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  <span class="comment">//é¢†å¯¼æ‰‹æœºå·é›†åˆ</span></span><br><span class="line">                <span class="comment">//æ ¹æ®äº§å“ç¼–ç ï¼Œæ˜¯å¦å®¡æ‰¹ï¼Œæ“ä½œç¼–ç (1:æ–°å¢ 4 9å…è´¹èµ„æºå»¶æœŸ )ï¼Œè·å–æ‰€æœ‰å¾…å®¡æ‰¹çš„è®¢å•å®¡æ‰¹å•åˆ—è¡¨</span></span><br><span class="line">                List&lt;AbsTaskItem&gt; absTaskItems = iAbsTaskItemDao.selectTaskItemAndSkuNumByActulStatus();</span><br><span class="line">                <span class="keyword">if</span> (CommonUtil.isNotNullList(absTaskItems)) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (AbsTaskItem absTaskItem : absTaskItems) &#123;</span><br><span class="line">                        <span class="type">Date</span> <span class="variable">createTime</span> <span class="operator">=</span> absTaskItem.getCreateTime();</span><br><span class="line">                        <span class="type">String</span> <span class="variable">orderCreateTimeStr</span> <span class="operator">=</span> DateUtil.formatDate2Str(createTime, DateUtil.YYYY_MM_DDHHMMSS);</span><br><span class="line">                        <span class="type">DateTimeFormatter</span> <span class="variable">formatter</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(DateUtil.YYYY_MM_DDHHMMSS);</span><br><span class="line">                        <span class="type">LocalDateTime</span> <span class="variable">orderCreateDateTime</span> <span class="operator">=</span> LocalDateTime.parse(orderCreateTimeStr, formatter);</span><br><span class="line">                        <span class="comment">//è·å–æ—¶é—´</span></span><br><span class="line">                        <span class="type">ZonedDateTime</span> <span class="variable">orderCreateTime</span> <span class="operator">=</span> ZonedDateTime.of(orderCreateDateTime, ZoneId.systemDefault());</span><br><span class="line">                        <span class="type">ZonedDateTime</span> <span class="variable">currentTime</span> <span class="operator">=</span> ZonedDateTime.now(ZoneId.systemDefault());</span><br><span class="line">                        <span class="comment">//è®¡ç®—æ—¶é—´å·®</span></span><br><span class="line">                        <span class="type">Duration</span> <span class="variable">duration</span> <span class="operator">=</span> Duration.between(orderCreateTime, currentTime);</span><br><span class="line">                        <span class="keyword">if</span> (duration.toMinutes() &gt; <span class="number">24</span> * <span class="number">60</span>) &#123;</span><br><span class="line">                            <span class="comment">//æ ¹æ®å•å·å»åœ¨é€”è¡¨æŸ¥è¯¢å±æ€§  1116013001 æ˜¯å¦å…è´¹æµ‹è¯•  0-å¦ 1-æ˜¯</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">prodOrdSkuNum</span> <span class="operator">=</span> absTaskItem.getProdOrdSkuNum();</span><br><span class="line">                            <span class="type">String</span> <span class="variable">charValue</span> <span class="operator">=</span> iProdistProdordSkuDao.selectProdordSkuNumByProSkuNumAndCharNum(prodOrdSkuNum);</span><br><span class="line">                            <span class="keyword">if</span> (StringUtils.equals(<span class="string">&quot;1&quot;</span>,charValue) &amp;&amp; StringUtils.isNotBlank(charValue)) &#123;</span><br><span class="line">                                <span class="type">String</span> <span class="variable">absTaskId</span> <span class="operator">=</span> absTaskItem.getAbsTaskId();</span><br><span class="line">                                <span class="comment">//è·å–åˆ°ABS_TASK_IDå»ä»£åŠè¡¨æŸ¥è¯¢å®¡æ‰¹äººçš„æ‰‹æœºå·</span></span><br><span class="line">                                List&lt;String&gt; TaskIdList = taskUserDao.selectPhoneNumByTaskId(absTaskId);</span><br><span class="line">                                phoneList.addAll(TaskIdList);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//æ‰‹æœºå·å»é‡  æ¯ä¸ªå®¡æ‰¹äººåªå‘é€ä¸€æ¬¡</span></span><br><span class="line">                    List&lt;String&gt; newphoneList = phoneList.stream().distinct().collect(Collectors.toList());</span><br><span class="line">                    log.info(<span class="string">&quot;å½“å‰éœ€è¦å‘é€çš„å®¡æ‰¹äººé›†åˆä¸º:&quot;</span>+JSONObject.toJSONString(newphoneList));</span><br><span class="line">                &#125;</span><br></pre></td></tr></table></figure></p><div class="note danger"><p>æ•²é‡ç‚¹ï¼Œåœ¨æ˜¨å¤©é‡æ–°å®¡è§†ä»£ç çš„æ—¶å€™å‘ç°è¿™æ®µä»£ç æœ‰å¾ˆå¤§é—®é¢˜ï¼Œå› ä¸ºæˆ‘å¿½ç•¥äº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯æµ‹è¯•è”è°ƒå’Œæ­£å¼ç”Ÿäº§ç¯å¢ƒä¸Šæ•°æ®çš„å·®å¼‚ã€‚<br>æµ‹è¯•ç¯å¢ƒå¯èƒ½åªèƒ½å‡ åƒæ¡æ•°æ®ï¼Œç”Ÿäº§æœ‰å‡ åƒä¸‡çš„æ•°æ®<br>é¦–å…ˆè¿™æ®µä»£ç ï¼ˆé—®é¢˜ä¸€è¿™æ®µï¼‰æ˜¯æŸ¥è¯¢å‡ºæ¥æ‰€æœ‰çš„æœªå®¡æ‰¹çš„è®¢å•ä¿¡æ¯ï¼Œæ³¨æ„ï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰çš„æ•°æ®ï¼Œæˆ‘ä»¬ç”Ÿäº§ä¸Šä¼°è®¡æœ‰å‡ ç™¾ä¸‡æˆ–è€…å‡ åƒä¸‡çš„æ•°æ®ï¼Œåé¢è¿˜è¦å»å¾ªç¯è¿™ä¸ªé›†åˆ<br>æ¯ä¸€æ¬¡çš„å¾ªç¯çš„é‡Œé¢è¿˜æœ‰è¿™ç§æ—¶é—´è½¬æ¢çš„å¯¹æ¯”.... è‚¯å®šæ˜¯ä¸å¯å–çš„ï¼Œæ‰€ä»¥è¿™ä¸ªé‡Œéœ€è¦åšä¸€ä¸ªä¼˜åŒ–ï¼Œæ€è·¯æ˜¯è¿™æ ·çš„<br>æˆ‘ä»¬å¯ä»¥åœ¨æŸ¥è¯¢çš„æ—¶å€™ç›´æ¥åŠ ä¸€ä¸ªå¯¹æ¯”å‡½æ•°ï¼Œè¿™ä¸ªæƒ³æ³•æˆ‘è¯•éªŒè¿‡ï¼Œä½†æ˜¯åœ¨ mybatis é‡Œé¢å¤ªéš¾å®ç°äº†ï¼Œæˆ‘è¯•äº†å¾ˆå¤šä¸­æ–¹æ³•ï¼Œæ¯æ¬¡è¦éƒ¨ç½²ä¸€ä¸‹ï¼ˆæœ¬åœ°æˆ‘çš„æœåŠ¡æœ‰é—®é¢˜è·‘ä¸èµ·æ¥ï¼‰ï¼Œæ— å¥ˆæ”¾å¼ƒ<br>æ‰€æœ‰ç”¨äº†ç¬¬äºŒç§æ–¹æ³•ï¼Œåˆ†æ‰¹å»æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œæ¯ä¸€æ‰¹è®¾å®šå€¼ä¸º 5000 æ¡ï¼Œå®šä¹‰ä¸€ä¸ªè‡ªå¢çš„ç„¶åéœ€è¦å®šä¹‰ä¸€ä¸ªè‡ªå¢çš„å˜é‡</p></div><p><figure class="highlight java"><figcaption><span>é—®é¢˜ä¸€</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;AbsTaskItem&gt; absTaskItems = iAbsTaskItemDao.selectTaskItemAndSkuNumByActulStatus();</span><br><span class="line"><span class="keyword">for</span> (AbsTaskItem absTaskItem : absTaskItems) &#123;</span><br><span class="line">    <span class="comment">//å¤„ç†é€»è¾‘...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br> è°ƒæ•´åçš„ä»£ç æ•´ä½“é€»è¾‘æ˜¯ä¸å˜çš„ï¼Œä½†æ˜¯åœ¨æŸ¥è¯¢çš„æ—¶å€™å¢åŠ äº†ä¸¤ä¸ªå€¼ï¼Œæ¯æ¬¡è¦æŸ¥è¯¢çš„å¤šå°‘æ¡æ•°æ® tchSize å’Œä¸€ä¸ªæ¡æ•°å®šä¹‰ä¹Ÿå«åç§»é‡ offset<br> å¤§è‡´å¯ä»¥ç†è§£ä¸ºï¼Œå‡è®¾æˆ‘ä»¬æœ‰ 500 æ¡æ•°æ®ï¼Œæˆ‘è®¾ç½®äº†æ¯æ¬¡æŸ¥è¯¢ 100 æ¡å’Œåç§»é‡è‡ªå¢ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„æ•°æ®å°±æ˜¯ 0-100 çš„æ•°æ®ï¼Œç¬¬äºŒæ¬¡ç”±äºåç§»é‡è‡ªå¢æŸ¥è¯¢çš„å°±æ˜¯æ˜¯ 100-200 çš„æ•°æ®ï¼Œä»¥æ­¤ç±»æ¨<br>è¿™æ ·åœ¨æŸ¥è¯¢çš„æ—¶å€™å°±å¯ä»¥æ§åˆ¶å¥½æ¯æ¬¡è¦æŸ¥è¯¢çš„æ¡æ•°ï¼Œæ‰€ä»¥è¿™é‡Œå†™çš„æ˜¯ while (true) æ­»å¾ªç¯ï¼ŒæŸ¥ä¸åˆ°æ•°æ®ç›´æ¥ break è·³å‡ºï¼Œä¸‹é¢æ˜¯ä¼˜åŒ–åçš„ä»£ç </p><p><figure class="highlight java"><figcaption><span>ä¼˜åŒ–å</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (isWorkDayOrNot(<span class="keyword">new</span> <span class="title class_">Date</span>())) &#123; <span class="comment">//å…ˆå¯¹æ—¶é—´åšä¸€ä¸ªåˆ¤æ–­</span></span><br><span class="line">              log.info(<span class="string">&quot;å½“å‰æ—¶é—´ä¸ºå·¥ä½œæ—¥ï¼Œå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡&quot;</span>);</span><br><span class="line">              <span class="comment">//æ¯æ¬¡éœ€è¦æŸ¥è¯¢çš„æ¬¡æ•°</span></span><br><span class="line">              <span class="keyword">final</span> <span class="type">int</span> <span class="variable">batchSize</span> <span class="operator">=</span> <span class="number">5000</span>;</span><br><span class="line">              <span class="comment">//è‡ªå¢å˜é‡</span></span><br><span class="line">              <span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">              <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                  List&lt;AbsTaskItem&gt; absTaskItems = iAbsTaskItemDao.selectTaskItemAndSkuNumByActulStatus(offset, batchSize);</span><br><span class="line">                  <span class="keyword">if</span> (absTaskItems.isEmpty()) &#123;</span><br><span class="line">                      <span class="keyword">break</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//åˆ¤æ–­é€»è¾‘å•ç‹¬æŠ½æˆä¸€ä¸ªæ–¹æ³•ï¼Œæ¯æ¬¡æŸ¥è¯¢å‡ºæ¥çš„5000æ¡æ•°æ®å»åšå…·ä½“çš„åˆ¤æ–­</span></span><br><span class="line">                  processTaskItems(absTaskItems);</span><br><span class="line">                  offset += batchSize;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              log.info(<span class="string">&quot;éå·¥ä½œæ—¥ï¼Œä¸æ‰§è¡Œç§»åŠ¨äº‘å®¡æ‰¹äººå‘é€çŸ­ä¿¡æé†’ï¼&quot;</span>);</span><br><span class="line">              XxlJobLogger.log(<span class="string">&quot;éå·¥ä½œæ—¥ï¼Œä¸æ‰§è¡Œç§»åŠ¨äº‘å®¡æ‰¹äººå‘é€çŸ­ä¿¡æé†’ï¼&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">          e.getMessage();</span><br><span class="line">          log.error(<span class="string">&quot; %%%%%%ç§»åŠ¨äº‘çŸ­ä¿¡é€šçŸ¥é¢†å¯¼å®¡æ‰¹äººè¿›è¡Œå®¡æ‰¹å¼‚å¸¸errorï¼š&quot;</span> + e.getMessage());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//åˆ†å‰²çº¿==============================================mybatisé€»è¾‘===========================================================</span></span><br><span class="line">      select T.ABS_TASK_ITEM_ID,T.ABS_TASK_ID,PRODORD_SKU_NUM,T.ACTUAL_STATUS,T.ACTUAL_TIME,T.CREATE_TIME,</span><br><span class="line">   T.SLA,T.IS_TIME_OUT,T.TIME_OUT,T.ACTUAL_STAFF,T.OPERATION_SUB_TYPE,T.SKU_NUM,T.SKU_NAME,</span><br><span class="line">   T.PRODORD_SKU_NAME,T.TASK_ID,T.TASK_NAME,T.`ACTION`</span><br><span class="line">from abs_task.abs_task_item T</span><br><span class="line">where T.SKU_NUM = <span class="string">&#x27;111601&#x27;</span></span><br><span class="line">and T.ACTUAL_STATUS = <span class="string">&#x27;N&#x27;</span></span><br><span class="line">and T.OPERATION_SUB_TYPE <span class="title function_">in</span> <span class="params">(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;9&#x27;</span>)</span></span><br><span class="line">order by T.CREATE_TIME ASC</span><br><span class="line">LIMIT #&#123;limit&#125; OFFSET #&#123;offset&#125;</span><br></pre></td></tr></table></figure><br> è§£å†³å®Œè¿™ä¸ªé—®é¢˜åï¼Œç¬¬äºŒä¸ªé—®é¢˜å°±æ˜¯æ—¢ç„¶æ¯æ¬¡æŸ¥è¯¢çš„å‡ºæ¥çš„æ•°æ®æ˜¯å®šé‡çš„ï¼Œä½†æ˜¯æ¯æ¬¡ä¸è¿˜æ˜¯ä¸€æ¬¡ä¸€æ¬¡è°ƒç”¨åˆ¤æ–­çš„æ–¹æ³•å—ï¼Œåé¢å°±æƒ³åˆ°äº†ç”¨çº¿ç¨‹æ± æ¥è§£å†³è¿™ä¸ªé—®é¢˜<br><span class="kbd red"> 1ï¼šint cores=Runtime.getRuntime ().availableProcessors ()</span><br><span class="kbd red">2ï¼šExecutorService executor = Executors.newFixedThreadPool(cores * 2);</span><br> é¦–å…ˆç¬¬ä¸€ä¸ªç‚¹å°±æ˜¯ä¸º 1 çš„è¿™è¡Œä»£ç ï¼Œæ„æ€å°±æ˜¯è·å–åˆ°å½“å‰æœåŠ¡çš„ cpu æ ¸å¿ƒæ•°ï¼Œç¬¬äºŒç‚¹å°±æ˜¯åˆ›å»ºä¸€ä¸ª FixedThreadPool çº¿ç¨‹æ± ï¼Œå…¶çº¿ç¨‹å¤§å°æ˜¯ï¼ˆcores * 2ï¼‰å½“å‰æ ¸å¿ƒæ•°çš„ 2 å€ï¼Œè¿™ç§å†™æ³•çš„å¥½å¤„å°±æ˜¯åˆç†åˆ©ç”¨å½“å‰æœåŠ¡å™¨ cpu çš„èµ„æºä¿¡æ¯ï¼ˆæˆ‘ç†è§£çš„æ˜¯è¿™æ ·çš„ï¼‰å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥è¿™ä¹ˆå†™ Executors.newFixedThreadPool (10); è¿™ç§å°±æ˜¯ç›´æ¥åˆ›å»ºå½“å‰çº¿ç¨‹å¤§å°ä¸º 10ï¼Œå°±ä¸ç”¨ cores*2 äº†ï¼Œçœ‹è‡ªå·±å•¦ï½ï½<br> çŒ®ä¸Šä»£ç ï¼<br><figure class="highlight java"><figcaption><span>ç®€å•çš„çº¿ç¨‹æ± ä½¿ç”¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processTaskItems</span><span class="params">(List&lt;AbsTaskItem&gt; absTaskItems,ConcurrentHashMap&lt;String, Boolean&gt; phoneMap)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å½“å‰æ—¶é—´ä¸ºå·¥ä½œæ—¥ï¼Œå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">BUSINESS_SERVICE_NAME</span> <span class="operator">=</span> <span class="string">&quot;ABS-BUSINESS-ECLOUD&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cores</span> <span class="operator">=</span> Runtime.getRuntime().availableProcessors();</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(cores * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">for</span> (AbsTaskItem absTaskItem : absTaskItems) &#123;</span><br><span class="line">            executor.submit(() -&gt; &#123;</span><br><span class="line">                <span class="type">Date</span> <span class="variable">createTime</span> <span class="operator">=</span> absTaskItem.getCreateTime();</span><br><span class="line">                <span class="type">String</span> <span class="variable">orderCreateTimeStr</span> <span class="operator">=</span> DateUtil.formatDate2Str(createTime, DateUtil.YYYY_MM_DDHHMMSS);</span><br><span class="line">                <span class="type">DateTimeFormatter</span> <span class="variable">formatter</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(DateUtil.YYYY_MM_DDHHMMSS);</span><br><span class="line">                <span class="type">LocalDateTime</span> <span class="variable">orderCreateDateTime</span> <span class="operator">=</span> LocalDateTime.parse(orderCreateTimeStr, formatter);</span><br><span class="line">                <span class="comment">//è·å–æ—¶é—´</span></span><br><span class="line">                <span class="type">ZonedDateTime</span> <span class="variable">orderCreateTime</span> <span class="operator">=</span> ZonedDateTime.of(orderCreateDateTime, ZoneId.systemDefault());</span><br><span class="line">                <span class="type">ZonedDateTime</span> <span class="variable">currentTime</span> <span class="operator">=</span> ZonedDateTime.now(ZoneId.systemDefault());</span><br><span class="line">                <span class="comment">//è®¡ç®—æ—¶é—´å·®</span></span><br><span class="line">                <span class="type">Duration</span> <span class="variable">duration</span> <span class="operator">=</span> Duration.between(orderCreateTime, currentTime);</span><br><span class="line">                <span class="keyword">if</span> (duration.toMinutes() &gt; <span class="number">24</span> * <span class="number">60</span>) &#123;</span><br><span class="line">                  <span class="comment">//æ ¹æ®å•å·å»åœ¨é€”è¡¨æŸ¥è¯¢å±æ€§  1116013001 æ˜¯å¦å…è´¹æµ‹è¯•  0-å¦ 1-æ˜¯</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">prodOrdSkuNum</span> <span class="operator">=</span> absTaskItem.getProdOrdSkuNum();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">charValue</span> <span class="operator">=</span> iProdistProdordSkuDao.selectProdordSkuNumByProSkuNumAndCharNum(prodOrdSkuNum);</span><br><span class="line">                    <span class="keyword">if</span> (StringUtils.equals(<span class="string">&quot;1&quot;</span>,charValue) &amp;&amp; StringUtils.isNotBlank(charValue)) &#123;</span><br><span class="line">                        <span class="comment">//è·å–åˆ°ABS_TASK_IDå»ä»£åŠè¡¨æŸ¥è¯¢å®¡æ‰¹äºº</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">absTaskId</span> <span class="operator">=</span> absTaskItem.getAbsTaskId();</span><br><span class="line">                        List&lt;String&gt; TaskIdList = taskUserDao.selectPhoneNumByTaskId(absTaskId);</span><br><span class="line">                        <span class="keyword">if</span> (CommonUtil.isNotNullList(TaskIdList)) &#123;</span><br><span class="line">                            <span class="keyword">for</span> (String phoneNum : TaskIdList) &#123;</span><br><span class="line">                                phoneMap.put(phoneNum, Boolean.TRUE);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        executor.shutdown(); <span class="comment">//å…³é—­å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç­‰å¾…ç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span></span><br><span class="line">            executor.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br> æœ€åä¸€ä¸ªçŸ¥è¯†ç‚¹å°±æ˜¯ç¬¬ä¸‰åŠŸèƒ½ç‚¹ï¼Œ<span class="kbd red">3ï¼šå½“å‰å®¡æ‰¹äººä¸‹çš„æœ‰å¤šä¸ªè®¢å•æœªå®¡æ‰¹ï¼Œåªéœ€è¦å‘é€ä¸€æ¡çŸ­ä¿¡å°±è¡Œ</span>è¿™é‡Œåœ¨æ²¡æœ‰åŠ çº¿ç¨‹å¤„ç†æ•°æ®ä¹‹å‰ï¼Œç›´æ¥ç”¨çš„æ˜¯ Arraylist æ¥å­˜æ”¾æ•°æ®çš„ï¼ŒåŠ äº†ä¹‹åå°±æ„è¯†åˆ°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œåé¢å°±æ¢æˆçº¿ç¨‹å®‰å…¨çš„<span class="kbd red"> ConcurrentHashMap&lt;String, Boolean&gt; phoneMap = new ConcurrentHashMap&lt;&gt;();</span>ï¼Œä½¿ç”¨å®Œè®°å¾—é‡Šæ”¾èµ„æºï¼Œä¸è¿‡åé¢è¿˜é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œä½œç”¨åŸŸçš„é—®é¢˜<br>åæ­£ï¼Œé¢ï¼Œè¿™ä¸ªå¥½è§£å†³ï¼Œæ ¹æ®è‡ªå·±çš„ä»£ç åœ¨è°ƒç”¨ processTaskItems æ–¹æ³•å‰åˆå§‹åŒ–å°±å¥½äº†ï¼Œç„¶åæ‰§è¡Œå®Œä¸€å®šè¦ phoneMap.clear () ä¸€ä¸‹ï¼Œä¸ç„¶å°å¿ƒå†…å­˜æº¢å‡ºï½ï½ä¸‹è¯¾ï¼ï¼</p><div class="note warning no-icon"><p>æˆ‘<sub>åª</sub>æ˜¯<sub>ä¸€</sub>ä¸ª<sub>åˆ†</sub>å‰²<sub>çº¿</sub>æˆ‘<sub>åª</sub>æ˜¯<sub>ä¸€</sub>ä¸ª<sub>åˆ†</sub>å‰²<sub>çº¿</sub>æˆ‘<sub>åª</sub>æ˜¯<sub>ä¸€</sub>ä¸ª<sub>åˆ†</sub>å‰²<sub>çº¿</sub></p></div><div class="note success  no-icon"><p>stream æµçš„å¸¸è§ä½¿ç”¨æ–¹æ³• (æç¬‘ç®€æ´), åˆ«å˜²ç¬‘æˆ‘ï¼Œåæ­£æˆ‘æ˜¯å®¹æ˜“å¿˜.....</p></div><p><figure class="highlight java"><figcaption><span>streamæµçš„å¸¸è§ä½¿ç”¨æ–¹æ³•  å‚è€ƒé“¾æ¥ mark:1,6-7</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†æ•°æ®é€šè¿‡streamæµè½¬æ¢æˆkey valueçš„å½¢å¼ï¼Œä½¿ç”¨çš„åœºæ™¯å¾ˆå¤šï¼Œå–å€¼å¾—è¯ç›´æ¥æ ¹æ®äº§å“ç¼–ç Keyè·å–å°±è¡Œ</span></span><br><span class="line">HashMap&lt;String, String&gt; prodistCollect = prodistCharacters.stream()</span><br><span class="line">                        .collect(HashMap::<span class="keyword">new</span>, (x, item)-&gt; x.put(item.getCharNum(),item.getCharValue()),HashMap::putAll);</span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> prodistCollect.get(BusinessConstants.Character.PRODUCT_NUMBER_92023660001);</span><br><span class="line">é€»è¾‘åˆ¤æ–­...</span><br><span class="line">é€»è¾‘åˆ¤æ–­...</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯äº§å“çš„å±æ€§æ˜¯æœ‰ç‰¹æ®Šçš„è§„åˆ™ï¼Œæ¯”å¦‚æˆå¯¹å‡ºç°çš„è¿™ç§ï¼ˆ0å’Œ1ï¼‰æˆ‘ä»¬å°±å¯ä»¥ç”¨streamæµä¸­çš„groupingByæ–¹æ³•æ¥è¿›è¡Œä¸€ä¸ªåˆ†ç»„</span></span><br><span class="line">Map&lt;String, List&lt;ProdordCharacter&gt;&gt; listMap = prodordCharacters.stream().collect(Collectors.</span><br><span class="line">(ProdordCharacter::getAction));</span><br><span class="line"><span class="comment">//æ ¹æ®Action0å’Œ1è¿›è¡Œåˆ†ç»„</span></span><br><span class="line">List&lt;ProdordCharacter&gt; prodordCharacters0 = listMap.get(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">List&lt;ProdordCharacter&gt; prodordCharacters1 = listMap.get(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"><span class="comment">//è·å–æ‰€æœ‰çš„Action0å’Œ1å±æ€§ç»„</span></span><br><span class="line">HashMap&lt;String, String&gt; map0 = prodordCharacters0.stream().collect(HashMap&lt;String, String&gt;::<span class="keyword">new</span>, (x, item) -&gt; x.put(item.getCharNum(), item.getCharValue()), HashMap::putAll);</span><br><span class="line">HashMap&lt;String, String&gt; map1 = prodordCharacters1.stream().collect(HashMap&lt;String, String&gt;::<span class="keyword">new</span>, (x, item) -&gt; x.put(item.getCharNum(), item.getCharValue()), HashMap::putAll);</span><br><span class="line">ï¼ˆé€šè¿‡map0å’Œmap1è·å–å€¼æ¥è¿›è¡Œé€»è¾‘åˆ¤æ–­.....ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡streamæµé‡Œé¢çš„filterè¿›è¡Œè¿‡æ»¤ï¼Œè·å–åˆ°æŒ‡å®šäº§å“ç¼–ç çš„å€¼ï¼Œä¸‹é¢å°±æ˜¯é€šè¿‡filterè·å–åˆ°30037å±æ€§çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å€¼åˆ™å¤åˆ¶ä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">//å¯¹è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œæ“ä½œçš„æ—¶å€™è¦è®°å¾—ç”¨StringUtils.isNotBlank()æˆ–è€…åˆ«çš„åˆ¤ç©ºæ¥åšä¸€ä¸ªéç©ºåˆ¤æ–­ï¼Œä¸ç„¶å¯èƒ½ä¼šæŠ¥è½¬æ¢å¼‚å¸¸</span></span><br><span class="line"><span class="type">String</span> <span class="variable">icbVal</span> <span class="operator">=</span> prodordTemplates.getProdordIcbs().stream()</span><br><span class="line">                        .filter(prodordIcbs -&gt; BusinessConstants.Icb.ICB_30037.equals(prodordIcbs.getParameterNum()))</span><br><span class="line">                        .map(ProdordIcbs::getParameterValue)</span><br><span class="line">                        .findFirst()</span><br><span class="line">                        .orElse(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿˜æœ‰ä¸€ç§æ–¹æ³•è·å–åˆ°æŒ‡å®šäº§å“ç¼–ç çš„å€¼ï¼Œè·Ÿä¸Šé¢è¿™ç§ä¸€æ ·çš„æ–¹æ³•è¿›è¡Œè¿‡æ»¤ï¼Œä½†æ˜¯æœ€ç»ˆè¿”å›å€¼çš„ç±»å‹ä¸ä¸€æ · </span></span><br><span class="line">Optional&lt;ProdordCharacters&gt; siteNumOptional = prodordCharactersList.stream().filter(x -&gt; BusinessConstants.Character.ICB_30037.equals(x.getCharNum())).findFirst();</span><br><span class="line"><span class="keyword">if</span> (siteNumOptional.isPresent()) &#123;</span><br><span class="line">    <span class="type">ProdordCharacters</span> <span class="variable">siteNumCharacters</span> <span class="operator">=</span> siteNumOptional.get();</span><br><span class="line">    <span class="type">String</span> <span class="variable">charValue</span> <span class="operator">=</span> siteNumCharacters.getCharValue();</span><br><span class="line">    é€»è¾‘åˆ¤æ–­...</span><br><span class="line">    é€»è¾‘åˆ¤æ–­...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–åˆ°è¿™ä¸ªå±æ€§å…·ä½“å­—æ®µçš„å€¼ï¼Œä¸ç„¶æˆ‘è¿™ä¸ªè¿”å›çš„å°±æ˜¯ä¸€ä¸ªlist</span></span><br><span class="line"><span class="type">String</span> <span class="variable">templateNum</span> <span class="operator">=</span> queryProdistSkuInfoRsp.getProdistTemplates()</span><br><span class="line">        .stream()</span><br><span class="line">        .map(ProdistTemplateDto::getTemplateNum)</span><br><span class="line">        .collect(Collectors.joining(<span class="string">&quot;&quot;</span>));</span><br><span class="line"><span class="comment">//å°†listé›†åˆè½¬æ¢æˆå¯¹è±¡ï¼ˆå¦‚æœæ˜ç¡®åªæœ‰ä¸€ç»„æ•°æ®çš„è¯ ä¸ç„¶ä¼šå‡ºé—®é¢˜ï¼‰</span></span><br><span class="line">List&lt;ProdordTemplates&gt; prodordTemplate = prodordSkus.getProdordTemplate();</span><br><span class="line"><span class="type">ProdordTemplates</span> <span class="variable">prodordTemplates1</span> <span class="operator">=</span> prodordTemplate.stream().findFirst().orElse(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">//åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">Optional&lt;ProdordTemplates&gt; optionalTemplates = Optional.ofNullable(prodordTemplates1);</span><br><span class="line"><span class="keyword">if</span> (optionalTemplates.isPresent()) &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡ä¸ä¸ºç©ºçš„å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNotBlank(templateNum)) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">rateTmplByTemplateNum</span> <span class="operator">=</span> callProductServiceClient.getRateTmplByTemplateNum(templateNum);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">rateresult</span> <span class="operator">=</span> JSONObject.parseObject(rateTmplByTemplateNum);</span><br><span class="line">        <span class="type">String</span> <span class="variable">ratebizCode</span> <span class="operator">=</span> rateresult.getString(<span class="string">&quot;bizCode&quot;</span>);</span><br><span class="line">        <span class="type">PcRateTmpl</span> <span class="variable">pcRateTmpl</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;00000&quot;</span>.equals(ratebizCode)) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">datarate</span> <span class="operator">=</span> rateresult.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (com.bboss.common.util.StringUtils.isNotBlank(datarate)) &#123;</span><br><span class="line">                pcRateTmpl = JSONObject.parseObject(datarate, PcRateTmpl.class);</span><br><span class="line">                <span class="comment">//ç›´æ¥getè¿”å›çš„å°±æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">                <span class="type">ProdordTemplates</span> <span class="variable">prodordTemplates</span> <span class="operator">=</span> optionalTemplates.get();</span><br><span class="line">                <span class="keyword">if</span> ((pcRateTmpl.getNote().equals(<span class="string">&quot;M&quot;</span>) &amp;&amp; prodordTemplates.getNote().equals(<span class="string">&quot;F&quot;</span>)) </span><br><span class="line">                || (pcRateTmpl.getNote().equals(<span class="string">&quot;F&quot;</span>) &amp;&amp; prodordTemplates.getNote().equals(<span class="string">&quot;M&quot;</span>))) &#123;</span><br><span class="line">                    errMsg = String.format(<span class="string">&quot;å½“å‰å¥—é¤ï¼š[%s]ï¼Œä¸æ”¯æŒåŒ…å¹´åŒ…æœˆäº’è½¬!&quot;</span>,templateNum);</span><br><span class="line">                    log.error(errMsg);</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(errMsg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><div class="note info"><p>ç®€å•çš„è¯•ä¸€ä¸‹è¿™ä¸ªä»£ç å—åŠŸèƒ½ï¼Œä¸‹é¢ä»£ç å…¶å®å¾ˆ lowï¼Œçœ‹ä¸ªä¹å‘µå°±å¥½ï¼Œä¸å¿…ç ”ç©¶â•°(<em>Â°â–½Â°</em>)â•¯ï¼ˆä¸çŸ¥é“æˆ‘åœ¨è‡ªè¨€è‡ªè¯­ä»€ä¹ˆï¼‰</p></div><p><figure class="highlight java"><figcaption><span>è§£æJSONå–å€¼</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line">...</span><br><span class="line"><span class="comment">//ä¸‹é¢åªæ˜¯ä¸€ä¸ªç¤ºä¾‹</span></span><br><span class="line"><span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;check\&quot;:\&quot;[&#x27;1=&gt;-1&#x27;,&#x27;2=&gt;0|1|2|3|4|5&#x27;]\&quot;,\&quot;target\&quot;:\&quot;sjfl\&quot;&#125;&quot;</span>;</span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span>JSONObject.parseObject(a);</span><br><span class="line"><span class="type">String</span> <span class="variable">target</span> <span class="operator">=</span> jsonObject.get(<span class="string">&quot;target&quot;</span>).toString();</span><br><span class="line"><span class="type">String</span> <span class="variable">target1</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;target&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">check</span> <span class="operator">=</span> jsonObject.get(<span class="string">&quot;check&quot;</span>).toString();</span><br><span class="line">ArrayList&lt;String&gt; arrayList = JSON.parseObject(check, <span class="keyword">new</span> <span class="title class_">TypeReference</span>&lt;ArrayList&lt;String&gt;&gt;() &#123;&#125;);</span><br><span class="line"><span class="keyword">for</span> (String s : arrayList) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ•°ç»„å¾—å€¼&quot;</span>+s);</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="è¯»ä¹¦" scheme="http://example.com/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>æµ‹è¯•è®°å½•æ¡ˆä¾‹</title>
    <link href="http://example.com/posts/asd1.html"/>
    <id>http://example.com/posts/asd1.html</id>
    <published>2023-07-20T11:25:14.000Z</published>
    <updated>2024-09-27T07:52:24.844Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note default"><p>åç»­æµ‹è¯•éƒ½ä¼šåœ¨è¿™é‡Œé¢è¿›è¡Œï¼Œä¸€äº›å¥‡æ€ªçš„åŠŸèƒ½å®Œå–„è¿™ä¸ªå¸–å­å°±ä¸å†äº†å‘¢<br> 2023/08/24 11ï¼š59 æ›´æ–°ï¼š<br>æœ€è¿‘çœŸçš„å¥½å¿™ï¼Œå¿™åˆ°æ¯å¤©æ™šä¸Šéƒ½æ˜¯ä¸€ç‚¹é’Ÿç¡è§‰<br>å› ä¸ºæœ€è¿‘æˆ‘è¿˜è¦å­¦ä¹  PR,AE å·´æ‹‰å·´æ‹‰çš„ï¼Œè€Œä¸”æœ€è¿‘çœŸçš„å¤ªå¿™äº†<br> emmm æ‰€ä»¥å°±å…ˆä¸æè¿™ä¸ªç½‘é¡µäº†ï¼Œä½†æ˜¯æˆ‘ä¸ä¼šå¿˜è®°çš„ï¼Œè¿™æ˜¯æˆ‘æœ€çè§†çš„ğŸ’•<br>å›è§å›è§ï½</p></div><div class="note primary"><p>åŸºæœ¬åŸºæœ¬</p></div><div class="note info"><p>æç¤ºæç¤º</p></div><div class="note success no-icon"><p>æˆåŠŸæˆåŠŸ</p></div><div class="note success"><p>æˆåŠŸæˆåŠŸ</p></div><div class="note warning"><p>è­¦å‘Šè­¦å‘Š</p></div><div class="note danger"><p>å±é™©å±é™©</p></div><div class="note danger no-icon"><p>å±é™©å±é™©</p></div><div class="note warning"><p>==<mark><mark><mark><mark><mark><mark><mark><mark><mark><mark><mark><mark><mark> æˆ‘åªæ˜¯ä¸€ä¸ªåˆ†å‰²çº¿ï¼Œæˆ‘åªæ˜¯ä¸€ä¸ªåˆ†å‰²çº¿</mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></p></div><p><span class="label">æˆ‘æ˜¯é»˜è®¤çš„æ ‡ç­¾å¡</span><br><span class="label primary"> â€œé“ƒèŠ½ï¼Œå¥½ç—›â€â€œéƒ½è¯´äº†å¾ˆç—›äº†ï¼Œé“ƒèŠ½â€â€œä½ ä¸å–œæ¬¢å—ï¼Œä¸å–œæ¬¢å¤§è‡£å—â€â€œé“ƒèŠ½ï¼Œä¸å–œæ¬¢å¤§è‡£å•Šâ€</span><br><span class="label info"> å½“è®°å¿†æ¶ˆæ•£ï¼Œé»‘æš—å°†ä½ ç¯ç»•æ—¶ï¼Œå°±æŠ“ä½ä½ å¿ƒåº•çš„åŠ›é‡</span><br><span class="label success">âœ”ï¸æ²¡é”™æˆ‘æ˜¯ä¸ªå¯¹å·ï¼œï¼ˆï¼¾ï¼ï¼¾ï¼‰ï¼</span><br><span class="label warning">è­¦å‘Šè­¦å‘Šè­¦å‘Š</span><br><span class="label danger">ğŸ’”danger</span></p><div class="note warning"><p>==<mark><mark><mark><mark><mark><mark><mark><mark><mark><mark><mark><mark><mark> æˆ‘åªæ˜¯ä¸€ä¸ªåˆ†å‰²çº¿ï¼Œæˆ‘åªæ˜¯ä¸€ä¸ªåˆ†å‰²çº¿</mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></mark></p></div><ul class="task-list danger"><li class="task-list-item"><input type="checkbox" id="cbx_0" disabled="true"><label for="cbx_0"> è¿™æ˜¯ä¸€ä¸ªå°å‰å‰</label></li><li class="task-list-item"><input type="checkbox" id="cbx_1" checked="true" disabled="true"><label for="cbx_1"> è¿™æ˜¯ä¸€ä¸ªçº¢è‰²å‹¾å‹¾</label></li></ul><ul class="task-list primary"><li class="task-list-item"><input type="checkbox" id="cbx_2" disabled="true"><label for="cbx_2"> æœªå®Œæˆ</label></li><li class="task-list-item"><input type="checkbox" id="cbx_3" checked="true" disabled="true"><label for="cbx_3"> å®Œæˆ</label></li></ul><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_4" disabled="true"><label for="cbx_4"> æœªå®Œæˆ</label></li><li class="task-list-item"><input type="checkbox" id="cbx_5" checked="true" disabled="true"><label for="cbx_5"> é»˜è®¤é¢œè‰²</label></li></ul><p><span class="red">äººä»¬è¿½éšæ˜Ÿæ˜Ÿï¼Œæ˜Ÿæ˜Ÿè¿½éšä»€ä¹ˆå‘¢</span><br><span class="pink">æœ€å¤§çš„æ‚²å‰§å°±æ˜¯çœ¼çœ‹æ‚²å‰§å‘ç”Ÿå´æ— èƒ½æ— åŠ›</span><br><span class="orange">å¤œæ™šè¶Šé»‘æš—ï¼Œæ˜Ÿæ˜Ÿå°±è¶Šæ˜äº®</span><br><span class="yellow">ææƒ§æ˜¯ä¸€å‰¯æ²‰é‡çš„æ·é”ï¼ŒçŒäººå¿…é¡»æ­¥ä¼è½»ç›ˆèº«æ‰‹æ•æ·</span><br><span class="green">ä½•ä»¥ä¸å›è¯†ï¼Œæ— è¨€æ³ªåƒè¡Œ</span><br><span class="aqua">æ„¤æ€’äºæˆ‘æ²¡æœ‰æ„ä¹‰ï¼Œåªæ˜¯ä¸€é“ä¸æ–­æºƒçƒ‚çš„ä¼¤å£è€Œå·²</span><br><span class="blue">æƒ³è±¡æœ‰è¿™æ ·ä¸€ä¸ªåœ°æ–¹ï¼Œæ°¸è¿œæ˜¯é»‘å¤œï¼Œè€Œä½ ä¸è‚¯æ”¾å¼ƒæœŸå¾…ï¼Œé‚£æ°¸è¿œä¸ä¼šåˆ°æ¥çš„é»æ˜ã€‚æˆ‘ä¸ç”¨æƒ³è±¡ï¼Œæˆ‘å»è¿‡é‚£</span><br><span class="purple">å¤©å‘½ï¼ä¸»å®°ï¼æ¬ºè¯ˆï¼</span><br><span class="grey">ä¸–ç•Œæ—¢ä¸é»‘ä¹Ÿä¸ç™½ï¼Œè€Œæ˜¯ä¸€é“ç²¾è‡´çš„ç°</span><br><span class="blue">æ³ªåˆ°å°½å¤´ï¼Œå£°å£°æ³£è¡€ï¼Œäº¦æ­¥äº¦è¶‹ï¼ŒåŒç”Ÿå…±ä½“ï¼Œæš—å¤œç”Ÿå…‰ï¼Œæœˆæ¶Œå¤©æ²³ï¼Œä¸€å¿µä¸€åŠ¨ï¼Œå¤©äººæ°¸éš”ï¼Œé»‘æš—è½å°½ï¼Œæœˆåæ»¡å¤©</span></p><div class="note info"><p>ä»¥ä¸‹æ˜¯æŠ˜å æ ‡ç­¾å¡çš„ä½¿ç”¨æ–¹å¼</p></div><details><summary>é»˜è®¤é»˜è®¤ è¿™é‡Œæ˜¯ä¸€æ®µæ–‡å­—</summary><div><p>++ ä¸‹åˆ’çº¿ ++</p></div></details><details class="primary"><summary>ç´«è‰²</summary><div><div class="note info"><p>å‚è€ƒä¿¡æ¯</p></div><ul><li>ç¬¬ä¸€è¡Œ</li><li>ç¬¬äºŒè¡Œ</li></ul></div></details><details class="warning"><summary>é»„è‰²</summary><div><p>!! è­¦å‘Šè­¦å‘Šè­¦å‘Šè­¦å‘Šè­¦å‘Šï¼ï¼{.bulr}<br><span class="label success">label</span></p></div></details><details class="danger"><summary>çº¢è‰²</summary><div><p><span class="label danger">danger</span></p></div></details><div class="note info"><p>ä»¥ä¸‹æ˜¯è¡¨æƒ…çš„ä½¿ç”¨æ–¹å¼</p></div><p>ğŸ˜˜<br>ğŸ’<br>ğŸ¶<br>ğŸ’•</p><div class="note primary"><p>è¯•ä¸€ä¸‹æ ‡ç­¾å¡é‡Œé¢å¯ä»¥ä¸å¯ä»¥å±•ç¤º GIF åŠ¨æ€å›¾ç‰‡ï¼Œå˜¿å˜¿å˜¿ (â—Ë‡âˆ€Ë‡â—)</p></div><details class="info"><summary>è“è‰²</summary><div><div class="tab" data-id="id2" data-title="Tomä¼šå˜²ç¬‘ä½ "><p><img data-src="https://s1.locimg.com/2023/07/21/bc4651b5497c9.gif" alt></p></div><div class="tab" data-id="id2" data-title="å®µå®«æˆ‘è€å©†ï¼"><p><img data-src="https://s1.locimg.com/2023/07/21/24392f342afee.gif" alt></p></div></div></details>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="æ— " scheme="http://example.com/tags/%E6%97%A0/"/>
    
  </entry>
  
  <entry>
    <title>è¿™ä¸ªé‡Œé¢æ˜¯å›¾ç‰‡å“¦</title>
    <link href="http://example.com/posts/asd.html"/>
    <id>http://example.com/posts/asd.html</id>
    <published>2022-09-04T11:25:14.000Z</published>
    <updated>2024-09-23T08:48:23.881Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img data-src="https://s1.locimg.com/2023/07/17/00c6b927479f0.jpg" alt><br><img data-src="https://s2.loli.net/2023/07/19/LElFxSDsYmKqGvN.jpg" alt><br><img data-src="https://s2.loli.net/2023/07/19/Gfy4Z52qPis1Vzr.jpg" alt><br><img data-src="https://s2.loli.net/2023/07/19/ZYApErVO5NSvkcd.png" alt><br><img data-src="https://s2.loli.net/2023/07/19/mJFHNE5YayrdnqS.jpg" alt><br><img data-src="https://s2.loli.net/2023/07/19/JTR3sdXcQF5bLjy.jpg" alt><br><img data-src="https://hexo-sakura.oss-cn-beijing.aliyuncs.com/202409231644977.jpg" alt></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="æ— " scheme="http://example.com/tags/%E6%97%A0/"/>
    
  </entry>
  
</feed>
